flowchart TD
    Start([üè† HomePage]) --> AuthCheck{ƒê√£ ƒëƒÉng nh·∫≠p?}
    
    AuthCheck -->|Ch∆∞a| AuthChoice{Ch·ªçn h√†nh ƒë·ªông}
    AuthChoice -->|ƒêƒÉng nh·∫≠p| Login[üîê Login Page]
    AuthChoice -->|ƒêƒÉng k√Ω| Register[üìù Register Page]
    
    Login --> LoginSuccess{ƒêƒÉng nh·∫≠p th√†nh c√¥ng?}
    Register --> RegisterSuccess{ƒêƒÉng k√Ω th√†nh c√¥ng?}
    
    LoginSuccess -->|C√≥| RoleCheck{Lo·∫°i t√†i kho·∫£n?}
    LoginSuccess -->|Kh√¥ng| Login
    RegisterSuccess -->|C√≥| RoleCheck
    RegisterSuccess -->|Kh√¥ng| Register
    
    RoleCheck -->|Farmer| FarmerDash[üë®‚Äçüåæ Farmer Dashboard]
    RoleCheck -->|Wholesaler| WholesalerDash[üè™ Wholesaler Dashboard]
    
    %% Farmer Flow
    FarmerDash --> FarmerMenu{Menu Farmer}
    FarmerMenu -->|Qu·∫£n l√Ω N√¥ng tr·∫°i| Farms[üöú Farms Page]
    FarmerMenu -->|Qu·∫£n l√Ω C√¢y tr·ªìng| Crops[üåæ Crops Page]
    FarmerMenu -->|ƒê·∫•u gi√°| Auctions[üî® Auctions Page]
    FarmerMenu -->|H·ª£p ƒë·ªìng| Contracts[üìÑ Contracts Page]
    FarmerMenu -->|Y√™u c·∫ßu mua| BuyRequests[üõí Buy Requests Page]
    FarmerMenu -->|V√≠| Wallet[üí≥ Wallet Page]
    
    Farms --> FarmActions{Thao t√°c}
    FarmActions -->|Th√™m m·ªõi| FarmForm[üìù Farm Form Dialog]
    FarmActions -->|Xem chi ti·∫øt| FarmDetail[üìã Farm Detail]
    FarmForm --> Farms
    FarmDetail --> Farms
    
    Crops --> CropActions{Thao t√°c}
    CropActions -->|Th√™m m·ªõi| CropForm[üìù Crop Form Dialog]
    CropActions -->|Xem chi ti·∫øt| CropDetail[üìã Crop Detail Page]
    CropForm --> Crops
    CropDetail --> Crops
    
    Auctions --> AuctionActions{Thao t√°c}
    AuctionActions -->|T·∫°o ƒë·∫•u gi√°| CreateAuction[‚ûï Create Auction Page]
    AuctionActions -->|Xem chi ti·∫øt| AuctionDetail[üìã Auction Detail Page]
    CreateAuction --> Auctions
    AuctionDetail --> AuctionDetailActions{Trong ƒë·∫•u gi√°}
    AuctionDetailActions -->|K·∫øt th√∫c ƒë·∫•u gi√°| Contracts
    AuctionDetailActions -->|Quay l·∫°i| Auctions
    
    Contracts --> ContractActions{Thao t√°c}
    ContractActions -->|Xem chi ti·∫øt| ContractDetail[üìã Contract Detail Page]
    ContractDetail --> Contracts
    
    BuyRequests --> BuyRequestActions{Thao t√°c}
    BuyRequestActions -->|Xem chi ti·∫øt| BuyRequestDetail[üìã Buy Request Detail]
    BuyRequestDetail --> BuyRequests
    
    Wallet --> WalletActions{Thao t√°c}
    WalletActions -->|N·∫°p ti·ªÅn| Deposit[üí∞ Deposit Dialog]
    WalletActions -->|R√∫t ti·ªÅn| Withdraw[üí∏ Withdraw Dialog]
    WalletActions -->|Qu·∫£n l√Ω t√†i kho·∫£n| BankAccount[üè¶ Bank Account Dialog]
    Deposit --> Wallet
    Withdraw --> Wallet
    BankAccount --> Wallet
    
    %% Wholesaler Flow
    WholesalerDash --> WholesalerMenu{Menu Wholesaler}
    WholesalerMenu -->|ƒê·∫•u gi√°| WholesalerAuctions[üî® Auctions Page]
    WholesalerMenu -->|ƒê·∫•u gi√° ƒë√£ tham gia| ParticipatedAuctions[‚úÖ Participated Auctions]
    WholesalerMenu -->|T√¨m s·∫£n ph·∫©m| FindProducts[üîç Find Products Page]
    WholesalerMenu -->|Y√™u c·∫ßu mua| MyBuyRequests[üõí My Buy Requests]
    WholesalerMenu -->|H·ª£p ƒë·ªìng| WholesalerContracts[üìÑ Contracts Page]
    WholesalerMenu -->|B√°o c√°o| Reports[üìä Reports Page]
    WholesalerMenu -->|V√≠| WholesalerWallet[üí≥ Wallet Page]
    
    WholesalerAuctions --> WholesalerAuctionActions{Thao t√°c}
    WholesalerAuctionActions -->|Xem chi ti·∫øt| WholesalerAuctionDetail[üìã Auction Detail Page]
    WholesalerAuctionActions -->|ƒê·∫∑t gi√°| BidAction[üí∞ Place Bid]
    BidAction --> WholesalerAuctionDetail
    WholesalerAuctionDetail --> WholesalerAuctionDetailFlow{Trong ƒë·∫•u gi√°}
    WholesalerAuctionDetailFlow -->|Th·∫Øng ƒë·∫•u gi√°| ParticipatedAuctions
    WholesalerAuctionDetailFlow -->|Quay l·∫°i| WholesalerAuctions
    
    ParticipatedAuctions --> ParticipatedActions{Thao t√°c}
    ParticipatedActions -->|Xem chi ti·∫øt| ParticipatedDetail[üìã Participated Auction Detail]
    ParticipatedDetail --> ParticipatedAuctions
    
    FindProducts --> FindProductActions{Thao t√°c}
    FindProductActions -->|T√¨m ki·∫øm| SearchResults[üîç Search Results]
    FindProductActions -->|Xem chi ti·∫øt| ProductDetail[üìã Product Detail]
    SearchResults --> ProductDetail
    ProductDetail --> FindProducts
    
    MyBuyRequests --> MyBuyRequestActions{Thao t√°c}
    MyBuyRequestActions -->|T·∫°o y√™u c·∫ßu| CreateBuyRequest[‚ûï Create Buy Request]
    MyBuyRequestActions -->|Xem chi ti·∫øt| BuyRequestDetailWS[üìã Buy Request Detail]
    CreateBuyRequest --> MyBuyRequests
    BuyRequestDetailWS --> MyBuyRequests
    
    WholesalerContracts --> WholesalerContractActions{Thao t√°c}
    WholesalerContractActions -->|Xem chi ti·∫øt| WholesalerContractDetail[üìã Contract Detail Page]
    WholesalerContractDetail --> WholesalerContracts
    
    Reports --> ReportsView[üìä Reports View]
    ReportsView --> WholesalerDash
    
    WholesalerWallet --> WholesalerWalletActions{Thao t√°c}
    WholesalerWalletActions -->|Xem l·ªãch s·ª≠| WalletHistory[üìú Wallet History]
    WalletHistory --> WholesalerWallet
    
    %% Navigation back
    Farms -.->|Quay l·∫°i| FarmerDash
    Crops -.->|Quay l·∫°i| FarmerDash
    Auctions -.->|Quay l·∫°i| FarmerDash
    Contracts -.->|Quay l·∫°i| FarmerDash
    BuyRequests -.->|Quay l·∫°i| FarmerDash
    Wallet -.->|Quay l·∫°i| FarmerDash
    
    WholesalerAuctions -.->|Quay l·∫°i| WholesalerDash
    ParticipatedAuctions -.->|Quay l·∫°i| WholesalerDash
    FindProducts -.->|Quay l·∫°i| WholesalerDash
    MyBuyRequests -.->|Quay l·∫°i| WholesalerDash
    WholesalerContracts -.->|Quay l·∫°i| WholesalerDash
    Reports -.->|Quay l·∫°i| WholesalerDash
    WholesalerWallet -.->|Quay l·∫°i| WholesalerDash
    
    %% Logout
    FarmerDash --> Logout{ƒêƒÉng xu·∫•t?}
    WholesalerDash --> Logout
    Logout -->|C√≥| Start
    Logout -->|Kh√¥ng| FarmerDash
    Logout -->|Kh√¥ng| WholesalerDash
    
    %% Styling
    classDef startEnd fill:#e1f5ff,stroke:#01579b,stroke-width:3px
    classDef auth fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef farmer fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px
    classDef wholesaler fill:#f3e5f5,stroke:#6a1b9a,stroke-width:2px
    classDef decision fill:#fff9c4,stroke:#f57f17,stroke-width:2px
    classDef detail fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    
    class Start,Login,Register startEnd
    class AuthCheck,AuthChoice,LoginSuccess,RegisterSuccess,RoleCheck decision
    class FarmerDash,Farms,Crops,Auctions,Contracts,BuyRequests,Wallet,FarmerMenu,FarmerMenu decision
    class WholesalerDash,WholesalerAuctions,ParticipatedAuctions,FindProducts,MyBuyRequests,WholesalerContracts,Reports,WholesalerWallet,WholesalerMenu decision
    class FarmDetail,CropDetail,AuctionDetail,ContractDetail,BuyRequestDetail,ParticipatedDetail,WholesalerAuctionDetail,WholesalerContractDetail,BuyRequestDetailWS,ProductDetail detail
    class FarmForm,CropForm,CreateAuction,Deposit,Withdraw,BankAccount,BidAction,CreateBuyRequest farmer
    class WalletHistory,ReportsView wholesaler


